{% extends 'index.html' %}
{% load static %}

{% block content %}
<div class="jumbotron text-center">
  <h1>{{ agency }}</h1>
</div>

<!-- Container (About Section) -->
<div id="about" class="container-fluid">
  <div class="row">
    <div>
      <h2>About {{ agency }}</h2>
      <h4>Insert agency description</h4>
      <br><a class="btn btn-primary" href="{{ agency.website }}" role="button" target='_blank'>Visit website</a>
    </div>
  </div>
</div>

<div class="container-fluid bg-info">
  <div class="row">
    <div class='col-sm-4'>
      <div class="col-sm-3">
        <span class="glyphicon glyphicon-lock logo-small slideanim"></span>
      </div>
      <div class="col-sm-9">
        <h4><span class='score text-green'>7/10</span> {{ agency }} ranks higher than 75% of agencies on our security and privacy criteria. <a href="#security">See why.</a></h4><br>
      </div>
    </div>
    <div class='col-sm-4'>
      <div class="col-sm-3">
        <span class="glyphicon glyphicon-user logo-small slideanim"></span>
      </div>
      <div class="col-sm-9">
        <h4><span class='score text-red'>5/10</span> {{ agency }} ranks lower than 53% of agencies on our accessibility criteria. <a href='#accessibility'>See why.</a></h4><br>
      </div>
    </div>
      <div class='col-sm-4'>
      <div class="col-sm-3">
        <span class="glyphicon glyphicon-bullhorn logo-small slideanim"></span>
      </div>
      <div class="col-sm-9">
        <h4><span class='score text-green'>7/10</span> {{ agency }} ranks higher than 79% of agencies on our communication criteria. <a href='#communication'>See why.</a></h4><br>
      </div>
    </div>
  </div>
</div>

<!-- Image of site screenshot -->
<img src="{% static 'images/boston_screenshot.png' %}" class="img-responsive" style="margin: 0 auto; width:90%">

<!-- Container (Scoring Section) -->
<div id="pricing" class="container-fluid">
  <div class="text-center">
    <h3>We test each agency once a week. We last checked {{ agency.website }} {{ last_entry.created_date | timesince }} ago.</h3>
    <a href='#'>Read more about our methodology.</a>
  </div>
  <div class="row slideanim">
    <div class="col-sm-4 col-xs-12">
      <div class="panel panel-default text-center">
        <div class="panel-heading">
          <h1 id="security">Security & Privacy</h1>
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-sm-4">
                {% include 'agencies/check_box.html' with has_feature=last_entry.https_enabled %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>Uses HTTPS</h4><br>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-4">
              {% include 'agencies/check_box.html' with has_feature=True %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>No third party trackers</h4><br>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-4">
              {% include 'agencies/check_box.html' with has_feature=last_entry.has_privacy_policy %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>Has a privacy policy</h4><br>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-4 col-xs-12">
      <div class="panel panel-default text-center">
        <div class="panel-heading">
          <h1 id="accessibility">Website Accessibility</h1>
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-sm-4">
              {% include 'agencies/check_box.html' with has_feature=last_entry.mobile_friendly %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>Is mobile friendly</h4><br>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-4">
              {% include 'agencies/check_box.html' with has_feature=True %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>Passes Google's accessibility test</h4><br>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-4">
              {% include 'agencies/check_box.html' with has_feature=last_entry.good_performance %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>Passes Google's speed test</h4><br>
            </div>
          </div>
        </div>
      </div>
    </div>
        <div class="col-sm-4 col-xs-12">
      <div class="panel panel-default text-center">
        <div class="panel-heading">
          <h1 id="communication">Communication</h1>
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-sm-4">
              {% include 'agencies/check_box.html' with has_feature=last_entry.has_social_media %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>Uses social media</h4><br>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-4">
              {% include 'agencies/check_box.html' with has_feature=last_entry.has_contact_info %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>Multiple ways to contact</h4><br>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-4">
              {% include 'agencies/check_box.html' with has_feature=True %}
            </div>
            <div class="col-sm-8 text-left">
              <h4>Posts meetings and minutes</h4><br>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Container (Contact Section) -->
<footer id="contact" class="container-fluid bg-grey">
  <h2 class="text-center">CONTACT</h2>
  <div class="row">
    <div class="col-sm-5">
      <p><span class="glyphicon glyphicon-map-marker"></span> Cambridge, MA</p>
      <p><span class="glyphicon glyphicon-phone"></span> 867-5309</p>
      <p><span class="glyphicon glyphicon-globe"></span> <a href='https://github.com/codeforboston/civicpulse'>GitHub</a></p>
    </div>
    <div class="col-sm-7 slideanim">
      <div class="row">
        <div class="col-sm-6 form-group">
          <input class="form-control" id="name" name="name" placeholder="Name" type="text" required>
        </div>
        <div class="col-sm-6 form-group">
          <input class="form-control" id="email" name="email" placeholder="Email" type="email" required>
        </div>
      </div>
      <textarea class="form-control" id="comments" name="comments" placeholder="Say hello" rows="5"></textarea><br>
      <div class="row">
        <div class="col-sm-12 form-group">
          <button class="btn btn-default pull-right" type="submit">Send</button>
        </div>
      </div>
    </div>
  </div>
  <div class="text-center">
    <a href="#myPage" title="To Top">
      <span class="glyphicon glyphicon-chevron-up"></span>
    </a>
  </div>
</footer>

<script>
$(document).ready(function(){
  // Add smooth scrolling to all links in navbar + footer link
  $(".navbar a, footer a[href='#myPage']").on('click', function(event) {
    // Make sure this.hash has a value before overriding default behavior
    if (this.hash !== "") {
      // Prevent default anchor click behavior
      event.preventDefault();

      // Store hash
      var hash = this.hash;

      // Using jQuery's animate() method to add smooth page scroll
      // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
      $('html, body').animate({
        scrollTop: $(hash).offset().top
      }, 900, function(){

        // Add hash (#) to URL when done scrolling (default click behavior)
        window.location.hash = hash;
      });
    } // End if
  });

  $(window).scroll(function() {
    $(".slideanim").each(function(){
      var pos = $(this).offset().top;

      var winTop = $(window).scrollTop();
        if (pos < winTop + 600) {
          $(this).addClass("slide");
        }
    });
  });
})
</script>

{% endblock content %}
